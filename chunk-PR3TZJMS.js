import{a as S}from"./chunk-V3KESPTG.js";import"./chunk-OIQRXGYA.js";import{$ as x,A as o,Aa as O,D as m,E as v,I as p,Ia as P,Ja as R,Q as c,R as n,S as r,Z as u,ba as d,ca as b,ea as a,fa as l,ga as _,ha as C,ma as M,q as g,r as f,xa as h,ya as y}from"./chunk-JGLOSZAI.js";var w=()=>["/facturas"];function D(i,e){i&1&&(n(0,"div",6)(1,"p"),a(2,"Cargando reservas..."),r()())}function F(i,e){if(i&1){let t=u();n(0,"button",20),x("click",function(){g(t);let I=d().$implicit,k=d(2);return f(k.cancelarReserva(I.id))}),a(1," Cancelar Reserva "),r()}}function z(i,e){if(i&1&&(n(0,"div",9)(1,"div",10)(2,"div")(3,"h3"),a(4),r(),n(5,"span",11),a(6),r()()(),n(7,"div",12)(8,"div",13)(9,"span",14),a(10,"\u{1F4C5} Fechas:"),r(),n(11,"span"),a(12),r()(),n(13,"div",13)(14,"span",14),a(15,"\u{1F319} Noches:"),r(),n(16,"span"),a(17),r()(),n(18,"div",13)(19,"span",14),a(20,"\u{1F465} Hu\xE9spedes:"),r(),n(21,"span"),a(22),r()(),n(23,"div",15)(24,"span",14),a(25,"\u{1F4B0} Total:"),r(),n(26,"span",16),a(27),r()()(),n(28,"div",17),p(29,F,2,0,"button",18),n(30,"a",19),a(31,"Ver Factura"),r()()()),i&2){let t=e.$implicit,s=d(2);o(4),l(t.codigoReserva),o(),b("background-color",s.obtenerColorEstado(t.estado)),o(),_(" ",t.estado," "),o(6),C("",s.formatearFecha(t.fechaInicio)," - ",s.formatearFecha(t.fechaFin)),o(5),l(t.numeroNoches),o(5),l(t.numeroHuespedes),o(5),l(s.formatearMoneda(t.total)),o(2),c("ngIf",s.puedeCancelar(t)),o(),c("routerLink",M(11,w))}}function N(i,e){if(i&1&&(n(0,"div",7),p(1,z,32,12,"div",8),r()),i&2){let t=d();o(),c("ngForOf",t.reservas)}}function T(i,e){i&1&&(n(0,"div",21)(1,"h2"),a(2,"No tienes reservas"),r(),n(3,"p"),a(4,"Comienza explorando nuestras habitaciones disponibles"),r(),n(5,"a",22),a(6,"Ver Habitaciones"),r()())}var E=class i{constructor(e,t){this.reservaService=e;this.router=t}reservas=[];cargando=!0;ngOnInit(){this.cargarReservas()}cargarReservas(){this.reservaService.obtenerMisReservas().subscribe({next:e=>{e.success&&e.data&&(this.reservas=e.data),this.cargando=!1},error:e=>{console.error("Error:",e),this.cargando=!1}})}cancelarReserva(e){confirm("\xBFEst\xE1 seguro de cancelar esta reserva?")&&this.reservaService.cancelarReserva(e).subscribe({next:t=>{t.success&&(alert("Reserva cancelada exitosamente"),this.cargarReservas())},error:t=>{alert("Error al cancelar reserva")}})}obtenerColorEstado(e){return{pendiente:"#ffc107",confirmada:"#2196f3","en-curso":"#4caf50",completada:"#9e9e9e",cancelada:"#f44336"}[e]||"#9e9e9e"}formatearFecha(e){return new Date(e).toLocaleDateString("es-EC",{day:"2-digit",month:"long",year:"numeric"})}formatearMoneda(e){return new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD"}).format(e)}puedeCancelar(e){return e.estado==="pendiente"||e.estado==="confirmada"}static \u0275fac=function(t){return new(t||i)(m(S),m(P))};static \u0275cmp=v({type:i,selectors:[["app-mis-reservas"]],decls:10,vars:3,consts:[[1,"reservas-container"],[1,"page-header"],[1,"container"],["class","loading",4,"ngIf"],["class","reservas-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading"],[1,"reservas-list"],["class","reserva-card",4,"ngFor","ngForOf"],[1,"reserva-card"],[1,"reserva-header"],[1,"estado-badge"],[1,"reserva-body"],[1,"info-group"],[1,"label"],[1,"info-group","total"],[1,"amount"],[1,"reserva-footer"],["class","btn btn-cancel",3,"click",4,"ngIf"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-cancel",3,"click"],[1,"empty-state"],["routerLink","/departamentos",1,"btn","btn-primary"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"header",1)(2,"h1"),a(3,"Mis Reservas"),r(),n(4,"p"),a(5,"Gestiona todas tus reservaciones"),r()(),n(6,"div",2),p(7,D,3,0,"div",3)(8,N,2,1,"div",4)(9,T,7,0,"div",5),r()()),t&2&&(o(7),c("ngIf",s.cargando),o(),c("ngIf",!s.cargando),o(),c("ngIf",!s.cargando&&s.reservas.length===0))},dependencies:[O,h,y,R],styles:[".reservas-container[_ngcontent-%COMP%]{min-height:100vh;background:#f8f9fa}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1b5e20,#2e7d32);color:#fff;padding:60px 20px;text-align:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:40px 20px}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:15px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.reservas-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.reserva-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #0000001a}.reserva-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.reserva-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:#333;margin-bottom:8px}.estado-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;color:#fff;font-size:.85rem;font-weight:600;text-transform:uppercase}.reserva-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px}.info-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.label[_ngcontent-%COMP%]{font-weight:600;color:#666;font-size:.9rem}.info-group.total[_ngcontent-%COMP%]{grid-column:1 / -1;padding-top:15px;border-top:1px solid #f0f0f0}.info-group.total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.1rem}.amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1b5e20}.reserva-footer[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:10px 24px;border-radius:25px;text-decoration:none;font-weight:600;transition:all .3s;border:none;cursor:pointer;font-size:.95rem}.btn-primary[_ngcontent-%COMP%]{background:#1b5e20;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0d3d11;transform:translateY(-2px);box-shadow:0 4px 12px #1b5e204d}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-cancel[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#d32f2f}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.reserva-body[_ngcontent-%COMP%]{grid-template-columns:1fr}.reserva-footer[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};export{E as MisReservasComponent};
