import{a as E,b as I,c as A,d as V,e as D,f as k,j as L,k as T,l as z,m as N}from"./chunk-PMJTKAZT.js";import{a as S}from"./chunk-HBTDH666.js";import"./chunk-6APYAV5B.js";import{$ as f,A as s,Aa as v,D as w,E as P,I as u,Ia as O,Ja as F,Q as c,R as t,S as n,Z as M,ba as d,c as b,ea as a,ga as _,ia as x,ja as C,ka as h,q as p,r as m,ya as y}from"./chunk-JGLOSZAI.js";function R(i,o){if(i&1&&(t(0,"div",19),a(1),n()),i&2){let e=d(2);s(),_(" \u26A0\uFE0F ",e.error," ")}}function q(i,o){i&1&&(t(0,"span"),a(1,"Ingresar"),n())}function j(i,o){i&1&&(t(0,"span"),a(1,"Iniciando sesi\xF3n..."),n())}function B(i,o){if(i&1){let e=M();t(0,"form",6),f("ngSubmit",function(){p(e);let r=d();return m(r.onSubmit())}),t(1,"h2"),a(2,"Iniciar Sesi\xF3n"),n(),t(3,"div",7)(4,"label",8),a(5,"Correo Electr\xF3nico"),n(),t(6,"input",9),h("ngModelChange",function(r){p(e);let g=d();return C(g.email,r)||(g.email=r),m(r)}),n()(),t(7,"div",7)(8,"label",10),a(9,"Contrase\xF1a"),n(),t(10,"div",11)(11,"input",12),h("ngModelChange",function(r){p(e);let g=d();return C(g.password,r)||(g.password=r),m(r)}),n(),t(12,"button",13),f("click",function(){p(e);let r=d();return m(r.togglePassword())}),a(13),n()()(),u(14,R,2,1,"div",14),t(15,"button",15),u(16,q,2,0,"span",16)(17,j,2,0,"span",16),n(),t(18,"div",17),a(19," \xBFNo tienes cuenta? "),t(20,"a",18),a(21,"Reg\xEDstrate aqu\xED"),n()()()}if(i&2){let e=d();s(6),x("ngModel",e.email),s(5),c("type",e.mostrarPassword?"text":"password"),x("ngModel",e.password),s(2),_(" ",e.mostrarPassword?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),s(),c("ngIf",e.error),s(),c("disabled",e.cargando),s(),c("ngIf",!e.cargando),s(),c("ngIf",e.cargando)}}function Y(i,o){if(i&1&&(t(0,"div",19),a(1),n()),i&2){let e=d(2);s(),_(" \u26A0\uFE0F ",e.error," ")}}function G(i,o){i&1&&(t(0,"span"),a(1,"Verificar"),n())}function H(i,o){i&1&&(t(0,"span"),a(1,"Verificando..."),n())}function J(i,o){if(i&1){let e=M();t(0,"form",20),f("ngSubmit",function(){p(e);let r=d();return m(r.verify2FA())}),t(1,"h2"),a(2,"\u{1F510} Verificaci\xF3n en Dos Pasos"),n(),t(3,"p",21),a(4," Ingresa el c\xF3digo de 6 d\xEDgitos generado por tu aplicaci\xF3n de autenticaci\xF3n "),n(),t(5,"div",7)(6,"label",22),a(7,"C\xF3digo de Verificaci\xF3n"),n(),t(8,"input",23),h("ngModelChange",function(r){p(e);let g=d();return C(g.codigo2FA,r)||(g.codigo2FA=r),m(r)}),n()(),u(9,Y,2,1,"div",14),t(10,"div",24)(11,"button",25),f("click",function(){p(e);let r=d();return m(r.volver2FA())}),a(12," Volver "),n(),t(13,"button",15),u(14,G,2,0,"span",16)(15,H,2,0,"span",16),n()()()}if(i&2){let e=d();s(8),x("ngModel",e.codigo2FA),s(),c("ngIf",e.error),s(2),c("disabled",e.cargando),s(2),c("disabled",e.cargando||e.codigo2FA.length!==6),s(),c("ngIf",!e.cargando),s(),c("ngIf",e.cargando)}}var W=class i{constructor(o,e){this.authService=o;this.router=e}email="";password="";codigo2FA="";mostrar2FA=!1;userId="";cargando=!1;error="";mostrarPassword=!1;onSubmit(){return b(this,null,function*(){if(!this.email||!this.password){this.error="Por favor complete todos los campos";return}this.cargando=!0,this.error="",this.authService.login({email:this.email,password:this.password}).subscribe({next:o=>{o.requiresTwoFactor&&o.userId?(this.mostrar2FA=!0,this.userId=o.userId,this.error=""):o.success&&o.data&&this.router.navigate(["/departamentos"]),this.cargando=!1},error:o=>{this.error=o.error?.message||"Error al iniciar sesi\xF3n",this.cargando=!1}})})}verify2FA(){return b(this,null,function*(){if(!this.codigo2FA||this.codigo2FA.length!==6){this.error="Por favor ingrese el c\xF3digo de 6 d\xEDgitos";return}this.cargando=!0,this.error="",this.authService.verify2FA(this.userId,this.codigo2FA).subscribe({next:o=>{o.success&&o.data&&this.router.navigate(["/departamentos"]),this.cargando=!1},error:o=>{this.error=o.error?.message||"C\xF3digo inv\xE1lido",this.cargando=!1}})})}togglePassword(){this.mostrarPassword=!this.mostrarPassword}volver2FA(){this.mostrar2FA=!1,this.codigo2FA="",this.error=""}static \u0275fac=function(e){return new(e||i)(w(S),w(O))};static \u0275cmp=P({type:i,selectors:[["app-login"]],decls:9,vars:2,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-section"],[1,"subtitle"],["class","login-form",3,"ngSubmit",4,"ngIf"],["class","twofa-form",3,"ngSubmit",4,"ngIf"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","correo@ejemplo.com","required","","autocomplete","email",3,"ngModelChange","ngModel"],["for","password"],[1,"password-input"],["id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","","autocomplete","current-password",3,"ngModelChange","type","ngModel"],["type","button","tabindex","-1",1,"toggle-password",3,"click"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"register-link"],["routerLink","/register"],[1,"error-message"],[1,"twofa-form",3,"ngSubmit"],[1,"twofa-description"],["for","codigo2FA"],["type","text","id","codigo2FA","name","codigo2FA","placeholder","000000","maxlength","6","pattern","[0-9]{6}","required","","autofocus","",1,"code-input",3,"ngModelChange","ngModel"],[1,"button-group"],["type","button",1,"btn-secondary",3,"click","disabled"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"\u{1F3E8} Para\xEDso Verde"),n(),t(5,"p",3),a(6,"Sistema de Reservas"),n()(),u(7,B,22,8,"form",4)(8,J,16,6,"form",5),n()()),e&2&&(s(7),c("ngIf",!l.mostrar2FA),s(),c("ngIf",l.mostrar2FA))},dependencies:[v,y,N,k,E,I,A,L,T,z,D,V,F],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1b5e20,#2e7d32,#4caf50);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:40px;width:100%;max-width:450px;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;margin:0 0 8px}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;color:#666;margin:0}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .twofa-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin:0 0 24px;text-align:center}.twofa-description[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:14px;margin-bottom:24px;line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;font-size:16px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2e7d32;box-shadow:0 0 0 3px #2e7d321a}.password-input[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:48px}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;font-size:20px;cursor:pointer;padding:4px 8px;transition:opacity .2s}.toggle-password[_ngcontent-%COMP%]:hover{opacity:.7}.code-input[_ngcontent-%COMP%]{text-align:center;font-size:24px!important;font-weight:600;letter-spacing:8px;font-family:Courier New,monospace}.error-message[_ngcontent-%COMP%]{background-color:#fee;border-left:4px solid #f44336;color:#c62828;padding:12px 16px;border-radius:4px;margin-bottom:20px;font-size:14px;animation:_ngcontent-%COMP%_shake .3s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:14px 24px;font-size:16px;font-weight:600;color:#fff;background:linear-gradient(135deg,#1b5e20,#2e7d32);border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;margin-bottom:16px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #2e7d3266}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{padding:14px 24px;font-size:16px;font-weight:600;color:#2e7d32;background:#fff;border:2px solid #2e7d32;border-radius:8px;cursor:pointer;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e8f5e9}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.button-group[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.register-link[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#666;margin-top:8px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2e7d32;text-decoration:none;font-weight:600;transition:color .2s}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1b5e20;text-decoration:underline}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:24px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .twofa-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{W as LoginComponent};
